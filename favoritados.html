<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Favoritos - Receita de Mestre</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
        <link rel="icon" href="img/favicon.png" type="image/png">

    <style>
        body {
            font-family: Roboto, sans-serif;
            background: #f9f5f0;
            margin: 0;
            padding: 1.25em;
            color: #333;
        }

        .back-btn {
            display: inline-block;
            margin-bottom: 1em;
            padding: .5em .75em;
            background: #f39200;
            color: #fff;
            border-radius: .5em;
            text-decoration: none;
        }

        h1 {
            text-align: center;
            color: #f39200;
            margin: .5em 0 1.125em;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(13.75em, 1fr));
            gap: 1.25em;
        }

        .card {
            background: #fff;
            border-radius: .75em;
            overflow: hidden;
            box-shadow: 0 .375em 1.25em rgba(0, 0, 0, .08);
            cursor: pointer;
            transition: transform .18s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-.375em);
        }

        .card img {
            width: 100%;
            height: 8.75em;
            object-fit: cover;
        }

        .card-content {
            padding: .75em;
        }

        .card-content h3 {
            margin: 0;
            color: #f39200;
            font-size: 1.05rem;
        }

        .card-content p {
            margin: .375em 0 0;
            color: #555;
            font-size: .9rem;
        }

        .fav-btn {
            position: absolute;
            top: .625em;
            right: .625em;
            background-color: #fff;
            width: 2em;
            height: 2em;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            transition: transform .2s;
        }

        .fav-btn svg {
            width: 1.25em;
            height: 1.25em;
            fill: none;
            stroke: #000;
            stroke-width: .125em;
        }

        .fav-btn.active svg path {
            fill: #ff3b3b;
            stroke: #ff3b3b;
        }

        a {
            color: inherit;
            text-decoration: none;
        }
    </style>
</head>

<body>
     <section id="home">
        <header id="main-header">
            <div class="container">
                <div class="flex">
                    <a href="index.html"><img class="logo" src="./img/LogoTCC.png"></a>
                    <nav>
                        <ul class="menu">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="receitas.html">Receitas</a></li>
                            <li><a href="contato.html">Contato</a></li>
                            <li><a href="favoritados.html">Favoritad<span class="coracao"><i
                                            class="fas fa-heart"></i></span>s</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
    </section>

    <h1>Meus Favoritos</h1>
    <div class="grid" id="listaFavoritos"></div>

    <script src="receitasData.js"></script>
    <script>
        (function () {
            const favoritos = JSON.parse(localStorage.getItem("favoritos") || "[]");
            const container = document.getElementById("listaFavoritos");

            if (!window.categorias) {
                container.innerHTML = '<p>Nenhuma receita encontrada.</p>';
                return;
            }

            let todasReceitas = [].concat(...Object.values(window.categorias));
            const listaFavoritos = todasReceitas.filter(r => favoritos.includes(r.id));

            if (listaFavoritos.length === 0) {
                container.innerHTML = '<p style="grid-column:1/-1;padding:20px;background:#fff;border-radius:8px;">Você ainda não favoritou nenhuma receita.</p>';
                return;
            }

            listaFavoritos.forEach(r => {
                const card = document.createElement("div");
                card.className = "card";

                card.innerHTML = `
          <div class="fav-btn active" onclick="toggleFavorito(event,'${r.id}')">
            <svg viewBox="0 0 24 24">
              <path d="M12.1 8.64c-1.44-1.72-4.12-1.72-5.56 0a3.93 3.93 0 000 5.28L12 19.4l5.46-5.48a3.93 3.93 0 000-5.28c-1.44-1.72-4.12-1.72-5.36 0z"/>
            </svg>
          </div>
          <a href="receitas.html?r=${encodeURIComponent(r.id)}">
            <img src="${r.imagem}" alt="${r.nome}">
            <div class="card-content">
              <h3>${r.nome}</h3>
              <p>${r.dificuldade} • ${r.tempo}</p>
            </div>
          </a>
        `;
                container.appendChild(card);
            });
        })();

        window.toggleFavorito = function (e, id) {
            e.preventDefault();
            e.stopPropagation();

            const btn = e.currentTarget;
            btn.classList.toggle("active");

            let favs = JSON.parse(localStorage.getItem("favoritos") || "[]");
            if (btn.classList.contains("active")) {
                if (!favs.includes(id)) favs.push(id);
            } else {
                favs = favs.filter(x => x !== id);
            }

            localStorage.setItem("favoritos", JSON.stringify(favs));
        }
    </script>
</body>

</html>